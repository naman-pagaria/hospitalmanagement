{% extends 'hospital/admin_base.html' %}
{% load static %}
{% block content %}

<div class="py-4 bg-body-tertiary">
  <div class="container-xl">
    <div class="card shadow-sm border-0 rounded-4 overflow-hidden">

      <!-- Header / Toolbar -->
      <div class="bg-primary bg-gradient text-white p-3">
        <div class="d-flex align-items-center justify-content-between gap-3 flex-wrap">
          <div class="d-flex align-items-center gap-2">
            <span class="d-inline-flex align-items-center justify-content-center rounded-3 bg-white bg-opacity-10" style="width:44px;height:44px;">
              <i class="fa-solid fa-users" style="font-size:1.25rem;"></i>
            </span>
            <div>
              <div class="small text-white-50 fw-medium" style="font-size:0.85rem;">Admin</div>
              <h1 class="fw-semibold h5 m-0">Patients</h1>
            </div>
          </div>
          <div class="d-flex align-items-center gap-2 ms-auto w-100 w-md-auto">
            <form method="get" role="search" class="flex-grow-1 flex-md-grow-0" style="min-width:220px;">
              <div class="input-group input-group-sm search-pill">
                <span class="input-group-text">
                  <i class="fa-solid fa-magnifying-glass"></i>
                </span>
                <input type="search" name="q" value="{{ request.GET.q }}" class="form-control" placeholder="Search patients" aria-label="Search patients">
                <button class="btn" type="submit" aria-label="Search">
                  <i class="fa-solid fa-arrow-right"></i>
                </button>
              </div>
            </form>
            <a href="{% url 'admin-add-patient' %}" class="btn btn-sm btn-light border-0 px-3 py-1 rounded-pill">
              <i class="fa-solid fa-user-plus me-1" style="font-size:1.1rem;"></i> Add
            </a>
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-sm table-hover align-middle mb-0">
            <thead class="small text-muted">
              <tr>
                <th class="fw-bold" style="font-size:0.9rem;">Name</th>
                <th class="fw-bold" style="font-size:0.9rem;">Symptoms</th>
                <th class="fw-bold" style="font-size:0.9rem;">Mobile</th>
                <th class="fw-bold text-end" style="font-size:0.9rem;">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for p in patients %}
                <tr>
                  <td class="text-truncate" style="max-width:240px; font-size:0.9rem;">{{ p.get_name }}</td>
                  <td class="text-truncate" style="max-width:260px; font-size:0.9rem;">{{ p.symptoms|default:"—" }}</td>
                  <td style="font-size:0.9rem;">{{ p.mobile|default:"—" }}</td>
                  <td class="text-end" style="font-size:0.95rem;">
                    <a class="btn btn-sm btn-outline-secondary" href="{% url 'update-patient' p.id %}">
                      <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <a class="btn btn-sm btn-outline-danger" href="{% url 'delete-patient-from-hospital' p.id %}">
                      <i class="fa-solid fa-trash"></i>
                    </a>
                  </td>
                </tr>
              {% empty %}
                <tr>
                  <td colspan="4" class="text-center text-muted py-4" style="font-size:0.9rem;">No patients found.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>


<style>
  .search-pill .input-group-text,
  .search-pill .form-control,
  .search-pill .btn { border: none; }
  .search-pill { background: rgba(255,255,255,.9); border-radius: 999px; padding: 2px; }
  .search-pill .input-group-text { background: transparent; }
  .search-pill .btn { background: transparent; }
  .search-pill .form-control { background: transparent; box-shadow: none; }
  .search-pill:focus-within { box-shadow: 0 0 0 .15rem rgba(255,255,255,.35), 0 1px 2px rgba(0,0,0,.08) inset; }
</style>

{% endblock content %}
